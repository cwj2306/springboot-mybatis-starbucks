<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- repository 패키지 경로.내xml파일명Repository 로생성 -->
<mapper namespace="com.cos.starbucks.repository.UserRepository">
	<select id="findByUsername" resultType="com.cos.starbucks.model.User">
		select * from User where username = #{username}
	</select>
	
	<select id="findAll" resultType="com.cos.starbucks.model.User">
		select * from user
	</select>
	
	<select id="findByProviderAndProviderId" resultType="com.cos.starbucks.model.User">
		select * from User where provider = #{provider} AND providerId = #{providerId}
	</select>
	
	<select id="findSum" resultType="Integer">
		select sum(money) from user;
	</select>
	
	<select id="findCount" resultType="Integer">
		select count(*) from user;
	</select>
	
	<select id="usernameCheck" resultType="Integer">
		select count(*) from user where username=#{?};
	</select>
	
	<insert id="join">
		INSERT INTO user (username, password, name, email, provider, providerId, createDate) VALUES (#{username}, #{password}, #{name}, #{email}, #{provider}, #{providerId}, now())
	</insert>
	
	

	<update id="changePw">
	update user set password=#{password} where username="admin"
	</update>
	
	<update id="moneyUp">
	update user set money=#{money} where id=#{id}
	</update>
	
	<update id="changeSilverLevel">
	update user set level='Silver' where id=#{id}
	</update>
	
	<update id="changeGoldLevel">
	update user set level='Gold' where id=#{id}
	</update>
	
	<update id="changeUserInfo">
	update user set name=#{name},password=#{password} where id=#{id}
	</update>
	<!-- 안드로이드 -->
	<select id="findById" resultType="com.cos.starbucks.model.User">
		select * from User where Id = #{id}
	</select>
</mapper>